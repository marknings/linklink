(function(){
    var products={};
    products.openDetail=function(item){
        var instance=$.modal.open({template:"productDetail.html",
            controller:function(data){
                $.bindData.compileAll($('#modalProduct'),data);
            },
            data:item,
            canMove:true
        });
    };
    var loadInstance=$.modal.loading({message:"加载数据中..."});
    $.getJSON('getProducts',{pageNo:1,pageSize:2000},function(data){
        products.data=data.data;
        $.bindData.compileAll($('#productTable'),products);
        loadInstance.open.then(function(){                
                loadInstance.close();
            });
    });
})()


