(function() {    
    var pageNumber;
    var teamsValue={};
    var pageConfig={
        teamsValue:teamsValue,
        bodyId:'#teamEle',
        detailId:'#modalManageTeam',
        getCom:'getTeam',
        insertCom:'insertTeam',
        deleteCom:'deleteTeam',
        editCom:'editTeam',
        detailTemplate:'manageTeamDetail.html'
    }
    $.setPage(pageConfig);

    /*teamsValue.pageNo=1;
    teamsValue.pageSize=5;

    teamsValue.editTeam=function(titem){
        var item=$.extend({},titem);
        var dataItem=$.extend({},titem);
        item.title="修改数据";
        item.comfirm=function(){
            var tempData=$.getElemData.compileAll($('#modalManageTeam'),dataItem);
            $.post('editTeam',tempData,function(data){
                if(!!data.status){
                        alert("修改数据成功！");
                    }else{
                        alert("修改数据失败！");
                    }
                    $.modal.close();
            });
            console.log(tempData);
        };
        var instance=$.modal.open({template:"manageTeamDetail.html",
            controller:function(data){
                $.bindData.compileAll($('#modalManageTeam'),data);
            },
            data:item,
            canMove:true
        });
        instance.result.then(function(){
            teamsValue.getDataByPageIndex(teamsValue.pageNo);
        });
    };

    teamsValue.deleteTeam=function(item){
        var instance=$.modal.comfirmation({
            message:"你确定要删除【"+JSON.stringify(item).substring(0,100)+"...】数据吗？",
            title:"删除数据",
            comfirm:function(){
                $.post('deleteTeam',item,function(data){
                    if(!!data.status){
                        alert("删除数据成功！");
                    }else{
                        alert("删除数据失败！");
                    }
                    $.modal.close();
                });
            }
        });
        instance.result.then(function(){
            teamsValue.getDataByPageIndex(1);
        });
    };

    teamsValue.addTeam=function(){
        var item={};
        var dataItem={};
        item.title="新增数据";
        item.comfirm=function(){
            var tempData=$.getElemData.compileAll($('#modalManageTeam'),dataItem);
            $.post('insertTeam',tempData,function(data){
                if(!!data.status){
                        alert("新增数据成功！");
                    }else{
                        alert("新增数据失败！");
                    }
                    $.modal.close();
            });
        };
        var instance=$.modal.open({template:"manageTeamDetail.html",
            controller:function(data){
                $.bindData.compileAll($('#modalManageTeam'),data);
            },
            data:item,
            canMove:true
        });
        instance.result.then(function(){
            teamsValue.getDataByPageIndex(teamsValue.pageNo);
        });
    }

    teamsValue.prev=function(){
        var index=teamsValue.pageNo>1?teamsValue.pageNo-1:teamsValue.pageNo;
        teamsValue.getDataByPageIndex(index);
    };
    teamsValue.next=function(){
        var index=teamsValue.pageNo<pageNumber?teamsValue.pageNo+1:teamsValue.pageNo;
        teamsValue.getDataByPageIndex(index);
    };
    teamsValue.goto=function(index){        
        teamsValue.getDataByPageIndex(index);
    };
    teamsValue.getDataByPageIndex=function(index){
        teamsValue.pageNo=index;        
        $.getJSON('getTeam',{pageNo:teamsValue.pageNo,pageSize:teamsValue.pageSize},function(data){
            teamsValue.data=data.data;
            teamsValue.IndexArray=[];
            pageNumber=Math.ceil(data.totalCount/data.pageSize);
            for(var i=0;i<pageNumber;i++){
                teamsValue.IndexArray.push({index:i+1});
            }
            $.bindData.compileAll($('#teamEle'),teamsValue);
            $('.pagination li').removeClass("active").eq(index).addClass("active");
        });
    };*/
    teamsValue.getDataByPageIndex(1);
})()